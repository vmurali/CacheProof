\section{Guard lifting procedure to convert a guarded atomic action language into KBS}

\boxfig
\begin{figure}
\small
\begin{tabular}{ll}
\multicolumn{2}{l}{$liftA : @<a@> @-> @<be@>$}\\
$liftA \sem{\mylet t \eq e \myin a}$ & $=$\\
\begin{tabular}{rl}
     & $(*t_g, *t_b) = liftE \sem{e}$\\
  in & $liftA \sem{a}$\\
\end{tabular}\\
$liftA \sem{h(e)}$ & $=$\\
\begin{tabular}{rl}
 let & $(te, tf) = liftE \sem{e}$\\
  in & $h\_rdy \wedge te$\\
\end{tabular}\\
$liftA \sem{\myif e \then a}$ & $=$\\
\begin{tabular}{rrl}
 let & $(te, tf)$ & $= liftE \sem{e}$\\
     & $ta$ & $= liftA \sem{a}$\\
  in & \multicolumn{2}{l}{$( (ta \vee \neg tf)\wedge te)$}\\
\end{tabular}\\
$liftA \sem{a1 | a2}$ & $=$\\
\begin{tabular}{rrl}
 let & $ta1$ & $= liftA \sem{a1}$\\
     & $ta2$ & $= liftA \sem{a2}$\\
  in & $ta1 \wedge ta2$\\
\end{tabular}\\
$liftA \sem{a \texttt{ when } e}$ & $=$\\
\begin{tabular}{rrl}
 let & $(te, tf)$ & $= liftE \sem{e}$\\
     & $ta$ & $= liftA \sem{a}$\\
  in & \multicolumn{2}{l}{$( ta \wedge tf \wedge te)$}\\
\end{tabular}\\
\end{tabular}
\end{figure}

\begin{figure}
\small
\begin{tabular}{ll}
\multicolumn{2}{l}{$liftE : @<e@> @-> @<be, e@>$}\\
$liftE \sem{c}$ & $= (True, c)$\\
$liftE \sem{t}$ & $= (t_g, t_b)$\\
$liftE \sem{\mylet t \eq e1 \myin e2}$ & $=$\\
\begin{tabular}{rl}
     & $(*t_g, *t_b) = liftE \sem{e1}$\\
  in & $liftE \sem{e2}$\\
\end{tabular}\\
$liftE \sem{h(e)}$ & $=$\\
\begin{tabular}{rl}
 let & $(te, tf) = liftE \sem{e}$\\
  in & $(h\_rdy \wedge te, h\_res)$\\
\end{tabular}\\
$liftE \sem{h()}$ & $= (h\_rdy, h\_res)$\\
$liftA \sem{op(e1, e2}$ & $=$\\
\begin{tabular}{rrl}
 let & $te1, tf1$ & $= liftE \sem{e1}$\\
     & $te2, tf2$ & $= liftE \sem{e2}$\\
  in & \multicolumn{2}{l}{$te1 \wedge te2, op(tf1, tf2)$}\\
\end{tabular}\\
$liftA \sem{e1 \texttt{ when } e2}$ & $=$\\
\begin{tabular}{rrl}
 let & $(te1, tf1)$ & $= liftE \sem{e1}$\\
     & $(te2, tf2)$ & $= liftE \sem{e2}$\\
  in & \multicolumn{2}{l}{$( te1 \wedge tf2 \wedge te2, tf1)$}\\
\end{tabular}\\
\end{tabular}
\end{figure}
